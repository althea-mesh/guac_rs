<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1"
 width="1200px" height="829px"
 viewBox="0 0 1200 829"
 xmlns="http://www.w3.org/2000/svg" shape-rendering="crispEdges"
 stroke-width="1" text-rendering="geometricPrecision">
<polygon fill="white" points="145,7 153,7 153,16 145,16"/>
<text x="150" y="16" textLength="7" font-family="Helvetica" font-size="12" fill="black" text-anchor="middle">

u
</text>
<polygon fill="white" points="445,7 453,7 453,16 445,16"/>
<text x="450" y="16" textLength="7" font-family="Helvetica" font-size="12" fill="black" text-anchor="middle">

a
</text>
<polygon fill="white" points="745,7 753,7 753,16 745,16"/>
<text x="750" y="16" textLength="7" font-family="Helvetica" font-size="12" fill="black" text-anchor="middle">

b
</text>
<polygon fill="white" points="1045,7 1053,7 1053,16 1045,16"/>
<text x="1050" y="16" textLength="6" font-family="Helvetica" font-size="12" fill="black" text-anchor="middle">

c
</text>
<line x1="150" y1="22" x2="150" y2="50" stroke="black"/>
<line x1="450" y1="22" x2="450" y2="50" stroke="black"/>
<line x1="750" y1="22" x2="750" y2="50" stroke="black"/>
<line x1="1050" y1="22" x2="1050" y2="50" stroke="black"/>
<line x1="150" y1="33" x2="450" y2="33" stroke="black"/>
<polygon fill="black" points="450,33 440,39 440,27"/>
<polygon fill="white" points="238,23 361,23 361,32 238,32"/>
<text x="239" y="32" textLength="121" font-family="Helvetica" font-size="12" fill="black">
registerCounterparty B
</text>
<line x1="150" y1="50" x2="150" y2="78" stroke="black"/>
<line x1="450" y1="50" x2="450" y2="78" stroke="black"/>
<line x1="750" y1="50" x2="750" y2="78" stroke="black"/>
<line x1="1050" y1="50" x2="1050" y2="78" stroke="black"/>
<path d="M 750 55 A150,6 0 0,1 750,67" stroke="black" fill="none"/><polygon fill="black" points="750,67 760,73 760,61"/>
<polygon fill="white" points="625,51 748,51 748,60 625,60"/>
<text x="626" y="60" textLength="121" font-family="Helvetica" font-size="12" fill="black">
registerCounterparty A
</text>
<line x1="150" y1="78" x2="150" y2="106" stroke="black"/>
<line x1="450" y1="78" x2="450" y2="106" stroke="black"/>
<line x1="750" y1="78" x2="750" y2="106" stroke="black"/>
<line x1="1050" y1="78" x2="1050" y2="106" stroke="black"/>
<polygon fill="white" points="308,78 592,78 592,100 308,100"/>
<line x1="308" y1="78" x2="592" y2="78" stroke="black"/>
<line x1="308" y1="100" x2="592" y2="100" stroke="black"/>
<line x1="308" y1="78" x2="308" y2="100" stroke="black"/>
<line x1="592" y1="78" x2="592" y2="100" stroke="black"/>
<polygon fill="white" points="422,85 477,85 477,94 422,94"/>
<text x="423" y="94" textLength="53" font-family="Helvetica" font-size="12" fill="black">
state New
</text>
<line x1="150" y1="106" x2="150" y2="134" stroke="black"/>
<line x1="450" y1="106" x2="450" y2="134" stroke="black"/>
<line x1="750" y1="106" x2="750" y2="134" stroke="black"/>
<line x1="1050" y1="106" x2="1050" y2="134" stroke="black"/>
<polygon fill="white" points="608,106 892,106 892,128 608,128"/>
<line x1="608" y1="106" x2="892" y2="106" stroke="black"/>
<line x1="608" y1="128" x2="892" y2="128" stroke="black"/>
<line x1="608" y1="106" x2="608" y2="128" stroke="black"/>
<line x1="892" y1="106" x2="892" y2="128" stroke="black"/>
<polygon fill="white" points="722,113 777,113 777,122 722,122"/>
<text x="723" y="122" textLength="53" font-family="Helvetica" font-size="12" fill="black">
state New
</text>
<line x1="150" y1="134" x2="150" y2="162" stroke="black"/>
<line x1="450" y1="134" x2="450" y2="162" stroke="black"/>
<line x1="750" y1="134" x2="750" y2="162" stroke="black"/>
<line x1="1050" y1="134" x2="1050" y2="162" stroke="black"/>
<line x1="150" y1="145" x2="450" y2="145" stroke="black"/>
<polygon fill="black" points="450,145 440,151 440,139"/>
<polygon fill="white" points="255,135 344,135 344,144 255,144"/>
<text x="256" y="144" textLength="87" font-family="Helvetica" font-size="12" fill="black">
fillChannel B, 10
</text>
<line x1="150" y1="162" x2="150" y2="190" stroke="black"/>
<line x1="450" y1="162" x2="450" y2="190" stroke="black"/>
<line x1="750" y1="162" x2="750" y2="190" stroke="black"/>
<line x1="1050" y1="162" x2="1050" y2="190" stroke="black"/>
<line x1="450" y1="173" x2="750" y2="173" stroke="black"/>
<polygon fill="black" points="750,173 740,179 740,167"/>
<polygon fill="white" points="525,163 674,163 674,172 525,172"/>
<text x="526" y="172" textLength="147" font-family="Helvetica" font-size="12" fill="black">
proposeChannel A: 10, B: 0
</text>
<line x1="150" y1="190" x2="150" y2="218" stroke="black"/>
<line x1="450" y1="190" x2="450" y2="218" stroke="black"/>
<line x1="750" y1="190" x2="750" y2="218" stroke="black"/>
<line x1="1050" y1="190" x2="1050" y2="218" stroke="black"/>
<polygon fill="white" points="608,190 892,190 892,212 608,212"/>
<line x1="608" y1="190" x2="892" y2="190" stroke="black"/>
<line x1="608" y1="212" x2="892" y2="212" stroke="black"/>
<line x1="608" y1="190" x2="608" y2="212" stroke="black"/>
<line x1="892" y1="190" x2="892" y2="212" stroke="black"/>
<polygon fill="white" points="666,197 832,197 832,206 666,206"/>
<text x="667" y="206" textLength="164" font-family="Helvetica" font-size="12" fill="black">
state OtherCreating A: 10, B: 0
</text>
<line x1="150" y1="218" x2="150" y2="246" stroke="black"/>
<line x1="450" y1="218" x2="450" y2="246" stroke="black"/>
<line x1="750" y1="218" x2="750" y2="246" stroke="black"/>
<line x1="1050" y1="218" x2="1050" y2="246" stroke="black"/>
<line x1="750" y1="229" x2="450" y2="229" stroke="black" stroke-dasharray="2,2"/>
<polygon fill="black" points="450,229 460,235 460,223"/>
<polygon fill="white" points="501,219 698,219 698,228 501,228"/>
<text x="502" y="228" textLength="195" font-family="Helvetica" font-size="12" fill="black">
signature on newChannel A: 10, B: 0
</text>
<line x1="150" y1="246" x2="150" y2="274" stroke="black"/>
<line x1="450" y1="246" x2="450" y2="274" stroke="black"/>
<line x1="750" y1="246" x2="750" y2="274" stroke="black"/>
<line x1="1050" y1="246" x2="1050" y2="274" stroke="black"/>
<polygon fill="white" points="308,246 592,246 592,268 308,268"/>
<line x1="308" y1="246" x2="592" y2="246" stroke="black"/>
<line x1="308" y1="268" x2="592" y2="268" stroke="black"/>
<line x1="308" y1="246" x2="308" y2="268" stroke="black"/>
<line x1="592" y1="246" x2="592" y2="268" stroke="black"/>
<polygon fill="white" points="381,253 517,253 517,262 381,262"/>
<text x="382" y="262" textLength="134" font-family="Helvetica" font-size="12" fill="black">
state Creating A: 10, B: 0
</text>
<line x1="150" y1="274" x2="150" y2="302" stroke="black"/>
<line x1="450" y1="274" x2="450" y2="302" stroke="black"/>
<line x1="750" y1="274" x2="750" y2="302" stroke="black"/>
<line x1="1050" y1="274" x2="1050" y2="302" stroke="black"/>
<line x1="450" y1="285" x2="1050" y2="285" stroke="black"/>
<polygon fill="black" points="1050,285 1040,291 1040,279"/>
<polygon fill="white" points="685,275 813,275 813,284 685,284"/>
<text x="686" y="284" textLength="126" font-family="Helvetica" font-size="12" fill="black">
newChannel A: 10, B: 0
</text>
<line x1="150" y1="302" x2="150" y2="330" stroke="black"/>
<line x1="450" y1="302" x2="450" y2="330" stroke="black"/>
<line x1="750" y1="302" x2="750" y2="330" stroke="black"/>
<line x1="1050" y1="302" x2="1050" y2="330" stroke="black"/>
<path d="M 750 306 A146,6 0 0,1 853,316" stroke="black" fill="none"/><line x1="849" y1="312" x2="857" y2="320" stroke="black"/>
<line x1="857" y1="312" x2="849" y2="320" stroke="black"/>
<polygon fill="white" points="545,303 748,303 748,312 545,312"/>
<text x="546" y="312" textLength="201" font-family="Helvetica" font-size="12" fill="black">
fillChannel in OtherCreating state fails
</text>
<line x1="150" y1="330" x2="150" y2="347" stroke="black" stroke-dasharray="2,2"/>
<line x1="450" y1="330" x2="450" y2="347" stroke="black" stroke-dasharray="2,2"/>
<line x1="750" y1="330" x2="750" y2="347" stroke="black" stroke-dasharray="2,2"/>
<line x1="1050" y1="330" x2="1050" y2="347" stroke="black" stroke-dasharray="2,2"/>
<polygon fill="white" points="545,331 653,331 653,340 545,340"/>
<text x="546" y="340" textLength="106" font-family="Helvetica" font-size="12" fill="black">
After some polling...
</text>
<line x1="150" y1="347" x2="150" y2="375" stroke="black"/>
<line x1="450" y1="347" x2="450" y2="375" stroke="black"/>
<line x1="750" y1="347" x2="750" y2="375" stroke="black"/>
<line x1="1050" y1="347" x2="1050" y2="375" stroke="black"/>
<line x1="1050" y1="358" x2="450" y2="358" stroke="black" stroke-dasharray="2,2"/>
<polygon fill="black" points="450,358 460,364 460,352"/>
<polygon fill="white" points="690,348 809,348 809,357 690,357"/>
<text x="691" y="357" textLength="117" font-family="Helvetica" font-size="12" fill="black">
channelOpened event
</text>
<line x1="150" y1="375" x2="150" y2="403" stroke="black"/>
<line x1="450" y1="375" x2="450" y2="403" stroke="black"/>
<line x1="750" y1="375" x2="750" y2="403" stroke="black"/>
<line x1="1050" y1="375" x2="1050" y2="403" stroke="black"/>
<line x1="450" y1="386" x2="750" y2="386" stroke="black"/>
<polygon fill="black" points="750,386 740,392 740,380"/>
<polygon fill="white" points="526,376 673,376 673,385 526,385"/>
<text x="527" y="385" textLength="145" font-family="Helvetica" font-size="12" fill="black">
channelOpened notification
</text>
<line x1="750" y1="386" x2="1050" y2="386" stroke="black"/>
<polygon fill="black" points="1050,386 1040,392 1040,380"/>
<polygon fill="white" points="840,376 959,376 959,385 840,385"/>
<text x="841" y="385" textLength="117" font-family="Helvetica" font-size="12" fill="black">
verify channelOpened
</text>
<line x1="150" y1="403" x2="150" y2="431" stroke="black"/>
<line x1="450" y1="403" x2="450" y2="431" stroke="black"/>
<line x1="750" y1="403" x2="750" y2="431" stroke="black"/>
<line x1="1050" y1="403" x2="1050" y2="431" stroke="black"/>
<line x1="1050" y1="414" x2="750" y2="414" stroke="black" stroke-dasharray="2,2"/>
<polygon fill="black" points="750,414 760,420 760,408"/>
<polygon fill="white" points="833,404 966,404 966,413 833,413"/>
<text x="834" y="413" textLength="131" font-family="Helvetica" font-size="12" fill="black">
channelOpened success
</text>
<line x1="150" y1="431" x2="150" y2="459" stroke="black"/>
<line x1="450" y1="431" x2="450" y2="459" stroke="black"/>
<line x1="750" y1="431" x2="750" y2="459" stroke="black"/>
<line x1="1050" y1="431" x2="1050" y2="459" stroke="black"/>
<polygon fill="white" points="608,431 892,431 892,453 608,453"/>
<line x1="608" y1="431" x2="892" y2="431" stroke="black"/>
<line x1="608" y1="453" x2="892" y2="453" stroke="black"/>
<line x1="608" y1="431" x2="608" y2="453" stroke="black"/>
<line x1="892" y1="431" x2="892" y2="453" stroke="black"/>
<polygon fill="white" points="719,438 780,438 780,447 719,447"/>
<text x="720" y="447" textLength="59" font-family="Helvetica" font-size="12" fill="black">
state Open
</text>
<line x1="150" y1="459" x2="150" y2="487" stroke="black"/>
<line x1="450" y1="459" x2="450" y2="487" stroke="black"/>
<line x1="750" y1="459" x2="750" y2="487" stroke="black"/>
<line x1="1050" y1="459" x2="1050" y2="487" stroke="black"/>
<line x1="750" y1="470" x2="450" y2="470" stroke="black"/>
<polygon fill="black" points="450,470 460,476 460,464"/>
<polygon fill="white" points="523,460 676,460 676,469 523,469"/>
<text x="524" y="469" textLength="151" font-family="Helvetica" font-size="12" fill="black">
propose reDraw A: 10, B: 10
</text>
<line x1="150" y1="487" x2="150" y2="515" stroke="black"/>
<line x1="450" y1="487" x2="450" y2="515" stroke="black"/>
<line x1="750" y1="487" x2="750" y2="515" stroke="black"/>
<line x1="1050" y1="487" x2="1050" y2="515" stroke="black"/>
<polygon fill="white" points="308,487 592,487 592,509 308,509"/>
<line x1="308" y1="487" x2="592" y2="487" stroke="black"/>
<line x1="308" y1="509" x2="592" y2="509" stroke="black"/>
<line x1="308" y1="487" x2="308" y2="509" stroke="black"/>
<line x1="592" y1="487" x2="592" y2="509" stroke="black"/>
<polygon fill="white" points="363,494 536,494 536,503 363,503"/>
<text x="364" y="503" textLength="171" font-family="Helvetica" font-size="12" fill="black">
state OtherCreating A: 10, B: 10
</text>
<line x1="150" y1="515" x2="150" y2="543" stroke="black"/>
<line x1="450" y1="515" x2="450" y2="543" stroke="black"/>
<line x1="750" y1="515" x2="750" y2="543" stroke="black"/>
<line x1="1050" y1="515" x2="1050" y2="543" stroke="black"/>
<line x1="450" y1="526" x2="750" y2="526" stroke="black" stroke-dasharray="2,2"/>
<polygon fill="black" points="750,526 740,532 740,520"/>
<polygon fill="white" points="511,516 687,516 687,525 511,525"/>
<text x="512" y="525" textLength="174" font-family="Helvetica" font-size="12" fill="black">
signature on reDraw A: 10, B: 10
</text>
<line x1="150" y1="543" x2="150" y2="571" stroke="black"/>
<line x1="450" y1="543" x2="450" y2="571" stroke="black"/>
<line x1="750" y1="543" x2="750" y2="571" stroke="black"/>
<line x1="1050" y1="543" x2="1050" y2="571" stroke="black"/>
<polygon fill="white" points="608,543 892,543 892,565 608,565"/>
<line x1="608" y1="543" x2="892" y2="543" stroke="black"/>
<line x1="608" y1="565" x2="892" y2="565" stroke="black"/>
<line x1="608" y1="543" x2="608" y2="565" stroke="black"/>
<line x1="892" y1="543" x2="892" y2="565" stroke="black"/>
<polygon fill="white" points="678,550 821,550 821,559 678,559"/>
<text x="679" y="559" textLength="141" font-family="Helvetica" font-size="12" fill="black">
state Creating A: 10, B: 10
</text>
<line x1="150" y1="571" x2="150" y2="599" stroke="black"/>
<line x1="450" y1="571" x2="450" y2="599" stroke="black"/>
<line x1="750" y1="571" x2="750" y2="599" stroke="black"/>
<line x1="1050" y1="571" x2="1050" y2="599" stroke="black"/>
<line x1="750" y1="582" x2="1050" y2="582" stroke="black"/>
<polygon fill="black" points="1050,582 1040,588 1040,576"/>
<polygon fill="white" points="827,572 972,572 972,581 827,581"/>
<text x="828" y="581" textLength="143" font-family="Helvetica" font-size="12" fill="black">
submit reDraw A: 10, B: 10
</text>
<line x1="150" y1="599" x2="150" y2="616" stroke="black" stroke-dasharray="2,2"/>
<line x1="450" y1="599" x2="450" y2="616" stroke="black" stroke-dasharray="2,2"/>
<line x1="750" y1="599" x2="750" y2="616" stroke="black" stroke-dasharray="2,2"/>
<line x1="1050" y1="599" x2="1050" y2="616" stroke="black" stroke-dasharray="2,2"/>
<polygon fill="white" points="545,600 653,600 653,609 545,609"/>
<text x="546" y="609" textLength="106" font-family="Helvetica" font-size="12" fill="black">
After some polling...
</text>
<line x1="150" y1="616" x2="150" y2="644" stroke="black"/>
<line x1="450" y1="616" x2="450" y2="644" stroke="black"/>
<line x1="750" y1="616" x2="750" y2="644" stroke="black"/>
<line x1="1050" y1="616" x2="1050" y2="644" stroke="black"/>
<line x1="1050" y1="627" x2="750" y2="627" stroke="black" stroke-dasharray="2,2"/>
<polygon fill="black" points="750,627 760,633 760,621"/>
<polygon fill="white" points="830,617 969,617 969,626 830,626"/>
<text x="831" y="626" textLength="137" font-family="Helvetica" font-size="12" fill="black">
reDraw event A: 10, B: 10
</text>
<line x1="150" y1="644" x2="150" y2="672" stroke="black"/>
<line x1="450" y1="644" x2="450" y2="672" stroke="black"/>
<line x1="750" y1="644" x2="750" y2="672" stroke="black"/>
<line x1="1050" y1="644" x2="1050" y2="672" stroke="black"/>
<line x1="750" y1="655" x2="450" y2="655" stroke="black"/>
<polygon fill="black" points="450,655 460,661 460,649"/>
<polygon fill="white" points="549,645 650,645 650,654 549,654"/>
<text x="550" y="654" textLength="99" font-family="Helvetica" font-size="12" fill="black">
reDraw notification
</text>
<line x1="150" y1="672" x2="150" y2="700" stroke="black"/>
<line x1="450" y1="672" x2="450" y2="700" stroke="black"/>
<line x1="750" y1="672" x2="750" y2="700" stroke="black"/>
<line x1="1050" y1="672" x2="1050" y2="700" stroke="black"/>
<line x1="450" y1="683" x2="1050" y2="683" stroke="black"/>
<polygon fill="black" points="1050,683 1040,689 1040,677"/>
<polygon fill="white" points="711,673 788,673 788,682 711,682"/>
<text x="712" y="682" textLength="75" font-family="Helvetica" font-size="12" fill="black">
verify ReDraw
</text>
<line x1="150" y1="700" x2="150" y2="728" stroke="black"/>
<line x1="450" y1="700" x2="450" y2="728" stroke="black"/>
<line x1="750" y1="700" x2="750" y2="728" stroke="black"/>
<line x1="1050" y1="700" x2="1050" y2="728" stroke="black"/>
<line x1="1050" y1="711" x2="450" y2="711" stroke="black" stroke-dasharray="2,2"/>
<polygon fill="black" points="450,711 460,717 460,705"/>
<polygon fill="white" points="706,701 793,701 793,710 706,710"/>
<text x="707" y="710" textLength="85" font-family="Helvetica" font-size="12" fill="black">
reDraw success
</text>
<line x1="150" y1="728" x2="150" y2="756" stroke="black"/>
<line x1="450" y1="728" x2="450" y2="756" stroke="black"/>
<line x1="750" y1="728" x2="750" y2="756" stroke="black"/>
<line x1="1050" y1="728" x2="1050" y2="756" stroke="black"/>
<polygon fill="white" points="308,728 592,728 592,750 308,750"/>
<line x1="308" y1="728" x2="592" y2="728" stroke="black"/>
<line x1="308" y1="750" x2="592" y2="750" stroke="black"/>
<line x1="308" y1="728" x2="308" y2="750" stroke="black"/>
<line x1="592" y1="728" x2="592" y2="750" stroke="black"/>
<polygon fill="white" points="419,735 480,735 480,744 419,744"/>
<text x="420" y="744" textLength="59" font-family="Helvetica" font-size="12" fill="black">
state Open
</text>
<line x1="150" y1="756" x2="150" y2="784" stroke="black"/>
<line x1="450" y1="756" x2="450" y2="784" stroke="black"/>
<line x1="750" y1="756" x2="750" y2="784" stroke="black"/>
<line x1="1050" y1="756" x2="1050" y2="784" stroke="black"/>
<line x1="450" y1="767" x2="750" y2="767" stroke="black" stroke-dasharray="2,2"/>
<polygon fill="black" points="750,767 740,773 740,761"/>
<polygon fill="white" points="556,757 643,757 643,766 556,766"/>
<text x="557" y="766" textLength="85" font-family="Helvetica" font-size="12" fill="black">
reDraw success
</text>
<line x1="150" y1="784" x2="150" y2="812" stroke="black"/>
<line x1="450" y1="784" x2="450" y2="812" stroke="black"/>
<line x1="750" y1="784" x2="750" y2="812" stroke="black"/>
<line x1="1050" y1="784" x2="1050" y2="812" stroke="black"/>
<polygon fill="white" points="608,784 892,784 892,806 608,806"/>
<line x1="608" y1="784" x2="892" y2="784" stroke="black"/>
<line x1="608" y1="806" x2="892" y2="806" stroke="black"/>
<line x1="608" y1="784" x2="608" y2="806" stroke="black"/>
<line x1="892" y1="784" x2="892" y2="806" stroke="black"/>
<polygon fill="white" points="719,791 780,791 780,800 719,800"/>
<text x="720" y="800" textLength="59" font-family="Helvetica" font-size="12" fill="black">
state Open
</text>
<line x1="150" y1="812" x2="150" y2="829" stroke="black"/>
<line x1="450" y1="812" x2="450" y2="829" stroke="black"/>
<line x1="750" y1="812" x2="750" y2="829" stroke="black"/>
<line x1="1050" y1="812" x2="1050" y2="829" stroke="black"/>
<line x1="75" y1="817" x2="1125" y2="817" stroke="black" stroke-dasharray="2,2"/>
<polygon fill="white" points="535,813 663,813 663,822 535,822"/>
<text x="536" y="822" textLength="126" font-family="Helvetica" font-size="12" fill="black">
Channel is ready to use
</text>
<line x1="150" y1="823" x2="150" y2="829" stroke="black"/>
<line x1="450" y1="823" x2="450" y2="829" stroke="black"/>
<line x1="750" y1="823" x2="750" y2="829" stroke="black"/>
<line x1="1050" y1="823" x2="1050" y2="829" stroke="black"/>
</svg>
