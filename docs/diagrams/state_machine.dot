// command to render: dot state_machine.dot -Tsvg -o state_machine.svg
digraph G {
    pad=0.2
    
    Legend [ label=<
        <table border="0" cellpadding="2" cellspacing="0" cellborder="0">
        <tr>
        <td colspan="4"><b>Color Legend</b></td>
        </tr>
        <tr>
        <td><font color="blue">From user</font></td>
        </tr>
        <tr>
        <td><font color="red">From counterparty</font></td>
        </tr>
        </table>
    >];

    
        New -> Proposing [ label="fillChannel", fontcolor="blue"];
        New -> OtherProposing [ label="unacceptable\nproposeChannel", fontcolor="red" ];
        New -> OtherCreating [ label="acceptable\nproposeChannel", fontcolor="red" ];
        OtherProposing -> OtherCreating [ label="acceptable\nnewChannel", fontcolor="red" ];
        Proposing -> Creating [ label="acceptable\nnewChannel", fontcolor="red" ];
        OtherCreating -> Open [ label="channelOpened\nnotification", fontcolor="red" ];
        Creating -> Open [ label="channelOpened\nconfirmation", fontcolor="red" ];
        Open -> OtherProposing [ label="unacceptable\nproposeChannel", fontcolor="red" ];
        Open -> OtherCreating [ label="acceptable\nproposeChannel", fontcolor="red" ];
        Open -> Proposing [ label="fillChannel", fontcolor="blue" ];
}